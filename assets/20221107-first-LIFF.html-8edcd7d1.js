import{_ as o,M as i,p,q as c,Q as n,t as s,N as e,a1 as t}from"./framework-2d24001b.js";const l={},r=n("h1",{id:"初次見面-liff-of-line",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#初次見面-liff-of-line","aria-hidden":"true"},"#"),s(" 初次見面 LIFF of LINE")],-1),u=n("p",null,"這是什麼？",-1),d=n("blockquote",null,[n("p",null,"LINE Front-end Framework (LIFF) is a platform for web apps provided by LINE. The web apps running on this platform are called LIFF apps.")],-1),k=n("p",null,"用 LINE 的 瀏覽器打開。可以在前端執行 LINE 的功能。",-1),v=n("h2",{id:"安裝",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#安裝","aria-hidden":"true"},"#"),s(" 安裝")],-1),h={href:"https://github.com/line/line-liff-v2-starter/tree/master/src/vanilla",target:"_blank",rel:"noopener noreferrer"},f=t(`<p><strong>npm</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> @line/liff 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><blockquote><p>p<wbr>rocess.env.LIFF_ID 指的是自己申請好的 LIFF_ID 要設定在 .env 檔上面</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> liff <span class="token keyword">from</span> <span class="token string">&#39;@line/liff&#39;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  liff
    <span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liffId</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">LIFF_ID</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Success! you can do something with LIFF API here.&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="設定-line" tabindex="-1"><a class="header-anchor" href="#設定-line" aria-hidden="true">#</a> 設定 LINE</h2><p>LINE 的應用 (截圖以 MessageingAPI 為例) 上面出現一個 LIFF 的標籤</p><blockquote><p><img src="https://i.imgur.com/h1QYiAN.png" alt=""> [color=#00b900]</p></blockquote><p>要先設定 LINE Login 這個功能才會啟動。</p><p>在 LINE Login 裡會出現這個</p><blockquote><p><img src="https://i.imgur.com/Pgo0u5V.png" alt=""> [color=#00b900]</p></blockquote><p>按下「ADD」填一填資料，就可以取得 LINE_ID</p><blockquote><p><img src="https://i.imgur.com/suXi607.png" alt=""> [color=#00b900]</p></blockquote><h2 id="開發" tabindex="-1"><a class="header-anchor" href="#開發" aria-hidden="true">#</a> 開發</h2><p>如果暫時還沒有佈署上去，可以暫時使用 ngrok 取得一個有 https 的網址當作開發用的臨時網址。</p>`,15),m={href:"https://liff-playground.netlify.app/",target:"_blank",rel:"noopener noreferrer"},b=t(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>liff.isInClient()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>判斷是不是在 LINE 裡的 LIFF browser 開啟的。這個 browser 和一般的 web view 不一樣。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>liff.getContext()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>userId 就是用來發給 Messageing API 功能的主動通知，識別碼</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
    &quot;type&quot;: &quot;external&quot;,
    &quot;userId&quot;: &quot;Ude7ca124379d3f9cde8aee01d5fefdce&quot;,
    &quot;liffId&quot;: &quot;1656508316-k7jNojXm&quot;,
    ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用 LINE 登入時，可以注意一個特性</strong></p><p>每個 LINE 帳號，在一個 <code>provider</code> 會有一個固定的 <code>userID</code>。 如果是不同的 <code>provider</code> 就會有不同的 <code>userID</code>。</p><p>而每個 provider 可以擁有不同的 Messageing API 服務，可以做成不同的聊天機器人，它們各自有不同的 <code>Channel ID</code>，透過不同的 <code>Channel ID</code> 就算使用者是相同的 <code>userID</code> 也可以在不同的服務發給指定的使用者。</p>`,8),g={href:"https://dwatow.github.io/2022/11-07-first-liff/",target:"_blank",rel:"noopener noreferrer"};function I(_,L){const a=i("ExternalLinkIcon");return p(),c("div",null,[r,u,d,k,v,n("p",null,[n("a",h,[s("參考 repo"),e(a)])]),f,n("p",null,[s("初始化成功，就可以來"),n("a",m,[s("遊樂場"),e(a)]),s("參考要使用的功能")]),b,n("p",null,[s("文章同時發佈於 "),n("a",g,[s("《Chris 技術筆記》 - 初次見面 LIFF of LINE"),e(a)])])])}const F=o(l,[["render",I],["__file","20221107-first-LIFF.html.vue"]]);export{F as default};
